<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Control Domo Cactus</title>

<style>
body{
    font-family: Arial, sans-serif;
    background: linear-gradient(135deg,#0f2027,#203a43,#2c5364);
    margin:0;
    padding:20px;
    color:white;
}

h1{
    text-align:center;
}

.container{
    max-width:1100px;
    margin:auto;
}

select,input,textarea,button{
    padding:8px;
    border-radius:5px;
    border:none;
    margin:5px 0;
}

button{
    background:#00c853;
    color:white;
    cursor:pointer;
}

button:hover{
    background:#009624;
}

.section{
    background:rgba(0,0,0,0.3);
    padding:15px;
    margin-bottom:15px;
    border-radius:10px;
}

table{
    width:100%;
    border-collapse: collapse;
    background:white;
    color:black;
    margin-top:10px;
}

th,td{
    padding:8px;
    border:1px solid #ddd;
    text-align:center;
}

th{
    background:#2c5364;
    color:white;
}
</style>
</head>

<body>

<h1>ðŸŒµ Sistema de Control del Domo (50 Cavidades)</h1>

<div class="container">

<div class="section">
<h3>Seleccionar Cavidad</h3>
<select id="cavidadSelect"></select>
</div>

<div class="section">
<h3>Registro de Siembra</h3>
<input type="text" id="especie" placeholder="Especie">
<input type="date" id="fechaSiembra">
<input type="number" id="semillas" placeholder="Cantidad de semillas">
<button onclick="guardarSiembra()">Guardar Siembra</button>
</div>

<div class="section">
<h3>Registro de Riego</h3>
<input type="date" id="fechaRiego">
<textarea id="obsRiego" placeholder="Observaciones del riego"></textarea>
<button onclick="guardarRiego()">Guardar Riego</button>
</div>

<div class="section">
<h3>Registro de Crecimiento</h3>
<input type="date" id="fechaCrecimiento">
<input type="number" id="tamano" placeholder="TamaÃ±o en cm">
<textarea id="obsCrecimiento" placeholder="Observaciones"></textarea>
<button onclick="guardarCrecimiento()">Guardar Crecimiento</button>
</div>

<div class="section">
<h3>Historial de la Cavidad</h3>
<div id="infoCavidad"></div>
<div id="historialRiego"></div>
<div id="historialCrecimiento"></div>
</div>

</div>

<script>

let domo = JSON.parse(localStorage.getItem("domoCactus")) || {};

const select = document.getElementById("cavidadSelect");

// Crear opciones 1â€“50
for(let i=1;i<=50;i++){
    let option = document.createElement("option");
    option.value = i;
    option.textContent = "Cavidad " + i;
    select.appendChild(option);
}

function guardarLocal(){
    localStorage.setItem("domoCactus", JSON.stringify(domo));
}

function obtenerCavidad(){
    let id = select.value;
    if(!domo[id]){
        domo[id] = {
            siembra:null,
            riegos:[],
            crecimiento:[]
        };
    }
    return domo[id];
}

function guardarSiembra(){
    let cav = obtenerCavidad();
    cav.siembra = {
        especie: document.getElementById("especie").value,
        fecha: document.getElementById("fechaSiembra").value,
        semillas: document.getElementById("semillas").value
    };
    guardarLocal();
    mostrarHistorial();
}

function guardarRiego(){
    let cav = obtenerCavidad();
    cav.riegos.push({
        fecha: document.getElementById("fechaRiego").value,
        obs: document.getElementById("obsRiego").value
    });
    guardarLocal();
    mostrarHistorial();
}

function guardarCrecimiento(){
    let cav = obtenerCavidad();
    cav.crecimiento.push({
        fecha: document.getElementById("fechaCrecimiento").value,
        tamano: document.getElementById("tamano").value,
        obs: document.getElementById("obsCrecimiento").value
    });
    guardarLocal();
    mostrarHistorial();
}

function mostrarHistorial(){
    let cav = obtenerCavidad();

    let info = "<h4>Siembra:</h4>";
    if(cav.siembra){
        info += `
        Especie: ${cav.siembra.especie}<br>
        Fecha: ${cav.siembra.fecha}<br>
        Semillas: ${cav.siembra.semillas}
        `;
    } else {
        info += "Sin registro";
    }

    document.getElementById("infoCavidad").innerHTML = info;

    let riegosHTML = "<h4>Riegos:</h4>";
    if(cav.riegos.length>0){
        riegosHTML += "<table><tr><th>Fecha</th><th>ObservaciÃ³n</th></tr>";
        cav.riegos.forEach(r=>{
            riegosHTML += `<tr><td>${r.fecha}</td><td>${r.obs}</td></tr>`;
        });
        riegosHTML += "</table>";
    } else {
        riegosHTML += "Sin registros";
    }

    document.getElementById("historialRiego").innerHTML = riegosHTML;

    let crecHTML = "<h4>Crecimiento:</h4>";
    if(cav.crecimiento.length>0){
        crecHTML += "<table><tr><th>Fecha</th><th>TamaÃ±o (cm)</th><th>ObservaciÃ³n</th></tr>";
        cav.crecimiento.forEach(c=>{
            crecHTML += `<tr><td>${c.fecha}</td><td>${c.tamano}</td><td>${c.obs}</td></tr>`;
        });
        crecHTML += "</table>";
    } else {
        crecHTML += "Sin registros";
    }

    document.getElementById("historialCrecimiento").innerHTML = crecHTML;
}

select.addEventListener("change", mostrarHistorial);

mostrarHistorial();

</script>

</body>
</html>
